@{ToDoContext db = new ToDoContext();}

@{
    ViewBag.Title = "View Lists";
}
<h2>@ViewBag.Title.</h2>

<p>Select a category to filter lists from the drop down box below</p>

<div>
    @using (Html.BeginForm("ListByCategory", "Home", FormMethod.Post))
    {
        @Html.DropDownList("catSubmit", new SelectList(db.Categories, "categoryName", "categoryName"), "--All Categories--")
        <input type="submit"/>
    }
</div>
<input type="button" value="List All" onclick="location.href='@Url.Action("ListAll", "Home")'" />

@if (ViewBag.Category != null)
{
    <h2 align="center">- @ViewBag.Category -</h2>

    <table class="table">
        <tr>
            <th>
                List Name
            </th>
            <th></th>
        </tr>

        @foreach (List l in ViewBag.List)
        {
            <tr>
                <td>
                    @l.listName
                </td>
                <td>
                    @Html.ActionLink("View/Edit", "ViewEditList", "Home", new { id = @l.listID }) |
                    @Html.ActionLink("Delete", "DeleteList", "Home", new { id = @l.listID }, new { onclick = "return confirm('You are about to delete list \"" + l.listName + "\". Click \"OK\" to confirm.');" })
                </td>
            </tr>
        }
    </table>
}

